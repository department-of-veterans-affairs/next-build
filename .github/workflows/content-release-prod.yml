name: "Content release: Prod"
on:
  # Can be manually triggered
  workflow_dispatch:
  # Runs automatically every 30 minutes from 8am to 8pm Monday to Friday.
  # This currently UTC -> EDT.
  schedule:
    # Content release to prod is every 30 minutes between the hours of 8 am - 8 pm ET,
    # with the exception of 3:30 pm ET to allow for CMS deploy.
    - cron: "*/30 12-18,20-23 * * 1-5"
    - cron: "0 19 * * 1-5"


  # Runs on API call. Used for CMS-driven build triggers.
  repository_dispatch:
    types: [content-release-prod]

concurrency: next-build-content-release-prod

jobs:
  content-release:
    uses: department-of-veterans-affairs/next-build/.github/workflows/content-release.yml@main
    with:
      build_type: "prod"
    secrets: inherit
